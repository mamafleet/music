<head>
    <meta charset="UTF-8" />
    <title>Lil K's Music</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#f8f8f8" />
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="center">
        <div>
            <div class="song">
                <h3>12.22</h3>
                <div id="12.22"></div>
            </div>
            <div class="song">
                <h3>8.22</h3>
                <div id="8.22"></div>
            </div>
            <div class="song">
                <h3>2.22</h3>
                <div id="2.22"></div>
            </div>
            <!-- <div class="song">
                <h3>4.21</h3>
                <div id="4.21"></div>
            </div> -->
        </div>
    </div>
</body>

<!-- https://cplayer.js.org/ -->
<!-- <script src="https://cdn.jsdelivr.net/npm/cplayer/dist/cplayer.min.js"></script> -->
<script src="cplayer.js"></script>
<script>

    let options = {
        //showPlaylistButton: false,
        showPlaylist: true,
        dark: true,
        big: true,  
    }

    let player = new cplayer({
        element: document.getElementById('12.22'),
        ...options,
        playlist: [
            {
                src: 'music/12.22/Lil K - Gods Plan.mpeg',
                poster: 'imgs/bad.jpg',
                name: 'Higher Level',
                artist: 'Lil K',
                lyric: '',
                sublyric: ''
            },
            {
                src: 'music/12.22/Lil K - Job Security.mpeg',
                poster: 'imgs/bad.jpg',
                name: 'Apple Core Poor',
                artist: 'Lil K',
                lyric: '',
                sublyric: ''
            },
            {
                src: 'music/12.22/Lil K - Menorah.mpeg',
                poster: 'imgs/bad.jpg',
                name: 'Menorah',
                artist: 'Lil K',
                lyric: '',
                sublyric: ''
            },
        ]
    })
    let player2 = new cplayer({
        element: document.getElementById('8.22'),
        ...options,
        playlist: [
            {
                src: 'music/8.22/Lil K - Business Blues.mpeg',
                poster: 'imgs/glasses.jpg',
                name: 'Business Blues',
                artist: 'Lil K',
                lyric: '',
                sublyric: ''
            },
            {
                src: 'music/8.22/Lil K - Infinity Cover.mp3',
                poster: 'imgs/glasses.jpg',
                name: 'Infinity Cover',
                artist: 'Lil K',
                lyric: '',
                sublyric: ''
            },
            {
                src: 'music/8.22/Lil K - Walter Schmitty.mp3',
                poster: 'imgs/glasses.jpg',
                name: 'Walter Schmitty',
                artist: 'Lil K',
                lyric: '',
                sublyric: ''
            },
        ]
    })

    let player3 = new cplayer({
        element: document.getElementById('2.22'),
        ...options,
        playlist: [
            {
                src: 'music/2.22 collabs/Lil K Ft. JTC - Break a Law To Save A Life.mpeg',
                poster: 'imgs/pawn.jpg',
                name: 'Break A Law To Save A Life',
                artist: 'Jewhampton',
                lyric: '',
                sublyric: ''
            },
            {
                src: 'music/2.22 collabs/Lil K Ft. Big Isis - Citizen of The Kingdom.mpeg',
                poster: 'imgs/pawn.jpg',
                name: 'Citizen of The Kingdom',
                artist: 'Lil K Ft. Big Isis',
                lyric: '',
                sublyric: ''
            },
            {
                src: 'music/2.22 collabs/Jewhampton - Chabad Haze.mp3',
                poster: 'imgs/pawn.jpg',
                name: 'Chabad Haze',
                artist: 'Jewhampton',
                lyric: '',
                sublyric: ''
            },
        ]
    })
    const players = [player, player2, player3];

    const pauseAllExceptI = function (players, index) {
        players.map((p, i) => {
            if (i !== index) {
                p.pause();
            }
        })
    }

    const pauseOtherPlayersListen = function (players) {
        players.map((p, i) => {
            p.on('play', () => pauseAllExceptI(players, i))
        })
    }

    const changeAllVolumeExceptI = function (players, index, volume) {
        players.map((p, i) => {
            if (i != index) {
                p.setVolume(volume)
            }
        })
    }

    const syncVolumeListen = function (players) {
        players.map((p, i) => {
            p.on('volumechange', () => {
                if (p.played) {
                    changeAllVolumeExceptI(players, i, p.volume)
                }
            })
        })
    }


    //makes it so one player is playing at any time.
    pauseOtherPlayersListen(players);
    syncVolumeListen(players);

</script>

<script>

</script>